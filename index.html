<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ูุชุงุจุน ุญุงูุฒ ุซุฑุงูู V4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#05060a" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header class="app-header">
      <div class="header-main">
        <div>
          <h1 class="app-title">ูุชุงุจุน ุญุงูุฒ ุซุฑุงูู</h1>
          <p id="week-range" class="week-range"></p>
        </div>
        <button id="new-week-btn" class="pill-btn pill-secondary" type="button">
          ุฃุณุจูุน ุฌุฏูุฏ
        </button>
      </div>
      <div id="status-pill" class="status-pill status-pending">
        <span id="status-label">ุจุนุถ ุงูุดุฑูุท ูู ุชุชุญูู ุจุนุฏ</span>
      </div>
    </header>

    <main class="app-main" id="main-scroll">
      <!-- ุดุงุดุฉ ุงูุฏุงุดุจูุฑุฏ -->
      <section class="screen screen-active" data-screen="home">
        <section class="card hero-card">
          <div class="hero-label">ูุถุน ุงูุญุงูุฒ ููุฐุง ุงูุฃุณุจูุน</div>
          <div class="hero-value-row">
            <div>
              <div class="hero-value" id="hero-bonus-amount">0.00 ุฑ.ุณ</div>
              <div class="hero-caption">ุฅุฌูุงูู ุงูุญุงูุฒ ุงููุชููููุน ุฅุฐุง ุชุญููุช ูู ุงูุดุฑูุท</div>
            </div>
            <button class="icon-btn" data-open-info="bonus-info" aria-label="ุชูุงุตูู ุงูุญุงูุฒ">i</button>
          </div>
        </section>

        <section class="grid grid-2">
          <article class="card metric-card">
            <div class="metric-label">ุฅุฌูุงูู ุงูุฏุฎู ูู ุงูุฑุญูุงุช</div>
            <div class="metric-main">
              <span class="metric-value" id="total-income">0.00</span>
              <span class="metric-unit">ุฑ.ุณ</span>
            </div>
          </article>

          <article class="card metric-card">
            <div class="metric-label">ุงูุฒูุงุฏุฉ ุงููุนููุฉ ุนูู ุงูุฏุฎู</div>
            <div class="metric-main">
              <span class="metric-value" id="income-increase">0.0</span>
              <span class="metric-unit">%</span>
            </div>
          </article>

          <article class="card metric-card">
            <div class="metric-label">ุนุฏุฏ ุงูุฑุญูุงุช</div>
            <div class="metric-main">
              <span class="metric-value" id="total-rides">0</span>
            </div>
          </article>

          <article class="card metric-card">
            <div class="metric-label">ุณุงุนุงุช ุงูุนูู (ูู ุงูุฑุญูุงุช)</div>
            <div class="metric-main">
              <span class="metric-value" id="total-hours">0.00</span>
              <span class="metric-unit">ุณุงุนุฉ</span>
            </div>
          </article>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุณุงุนุงุช ุงูุนูู ูุงูุฑุญูุงุช</h2>
          </header>
          <div class="grid grid-2 tight-grid">
            <div class="mini-metric">
              <div class="mini-label">ุฅุฌูุงูู ุณุงุนุงุช ุงูุนูู</div>
              <div class="mini-value"><span id="hours-worked">0.00</span> ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุงูุญุฏ ุงูุฃุฏูู ููุณุงุนุงุช</div>
              <div class="mini-value"><span id="min-hours">25</span> ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุฅุฌูุงูู ุนุฏุฏ ุงูุฑุญูุงุช</div>
              <div class="mini-value"><span id="rides-done">0</span></div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุงูุฑุญูุงุช ุงููุทููุจุฉ (ุชุตุงุนุฏู)</div>
              <div class="mini-value"><span id="rides-required">35</span></div>
            </div>
          </div>
          <p id="rides-escalation" class="hint-text"></p>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุงูุฐุฑูุฉ ูุฌูุฏุฉ ุงูุฃุฏุงุก</h2>
          </header>
          <div class="grid grid-2 tight-grid">
            <div class="mini-metric">
              <div class="mini-label">ูุณุจุฉ ุฑุญูุงุช ุงูุฐุฑูุฉ</div>
              <div class="mini-value"><span id="peak-percent">0.0</span>%</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุงูุญุฏ ุงูุฃุฏูู ููุณุจุฉ ุงูุฐุฑูุฉ</div>
              <div class="mini-value"><span id="min-peak">70</span>%</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ูุณุจุฉ ุงููุจูู (ูู ุงูุชุทุจููุงุช)</div>
              <div class="mini-value"><span id="accept-rate">0</span>%</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ูุณุจุฉ ุงูุฅูุบุงุก (ูู ุงูุชุทุจููุงุช)</div>
              <div class="mini-value"><span id="cancel-rate">0</span>%</div>
            </div>
          </div>
          <ul class="checklist" id="rules-checklist">
            <!-- ููุชูุฆ ุชููุงุฆูุงู ูู ุฌุงูุงุณูุฑุจุช -->
          </ul>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุงูุชุฏูู ุงูููุฏู ููุฐุง ุงูุฃุณุจูุน</h2>
          </header>
          <div class="grid grid-2 tight-grid">
            <div class="mini-metric">
              <div class="mini-label">ููุฏู ูุนู ุงูุขู</div>
              <div class="mini-value"><span id="cash-in-hand">0.00</span> ุฑ.ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุฑุตูุฏ ุงููุญูุธุฉ (ุชูุฏูุฑู)</div>
              <div class="mini-value"><span id="wallet-balance">0.00</span> ุฑ.ุณ</div>
            </div>
          </div>
          <p class="hint-text">ุงูุฃุฑูุงู ุชูุฑูุจูุฉ ูุชุนุชูุฏ ุนูู ุทุฑููุฉ ุฅุฏุฎุงูู ููุญุงูุงุช (ูุงุด / ุจุทุงูุฉ / ูุฎุชูุท).</p>
        </section>
      </section>

      <!-- ุดุงุดุฉ ุงูุฑุญูุงุช -->
      <section class="screen" data-screen="trips">
        <section class="card section-card sticky-card">
          <header class="section-header">
            <h2 class="section-title">ุชุณุฌูู ุงูุฑุญูุงุช ููุฃุณุจูุน ุงูุญุงูู</h2>
          </header>

          <div class="current-trip">
            <button id="start-trip-btn" class="primary-btn full-width">ุจุฏุก ุฑุญูุฉ</button>
            <button id="end-trip-btn" class="danger-btn full-width" disabled>ุฅููุงุก ุงูุฑุญูุฉ ุงูุญุงููุฉ</button>
            <p id="current-trip-label" class="hint-text"></p>
          </div>

          <div class="actions-row">
            <button id="show-report-btn" class="secondary-btn">ุชูุฑูุฑ ุงูุฃุณุจูุน</button>
            <button id="export-json-btn" class="ghost-btn">ุชุตุฏูุฑ ุจูุงูุงุช ุงูุฃุณุจูุน (JSON)</button>
          </div>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุณุฌู ุงูุฑุญูุงุช ููุฐุง ุงูุฃุณุจูุน</h2>
            <span class="section-caption">ูุนุฑุถ ุขุฎุฑ ุงูุฑุญูุงุช ุฃููุงู.</span>
          </header>
          <div class="table-wrapper">
            <table class="rides-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>ุจุฏุงูุฉ</th>
                  <th>ููุงูุฉ</th>
                  <th>ูุฏุฉ (ุฏ)</th>
                  <th>ูููุฉ</th>
                  <th>ุฐุฑูุฉ</th>
                  <th>ุฏูุน</th>
                </tr>
              </thead>
              <tbody id="rides-tbody">
                <!-- ููุชูุฆ ุชููุงุฆูุงู -->
              </tbody>
            </table>
          </div>
        </section>
      </section>

      <!-- ุดุงุดุฉ ุงููุญูุธุฉ -->
      <section class="screen" data-screen="wallet">
        <section class="card hero-card">
          <div class="hero-label">ููุฎุต ุงููุญูุธุฉ ููุฐุง ุงูุฃุณุจูุน</div>
          <div class="hero-value-row">
            <div>
              <div class="hero-value" id="wallet-hero">0.00 ุฑ.ุณ</div>
              <div class="hero-caption">ุฑุตูุฏู ุงูุชูุฑูุจู ูู ูุญูุธุฉ ุซุฑุงูู + ุงูููุฏู ูุนู</div>
            </div>
          </div>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุชูุงุตูู ุงูุชุฏูู ุงูููุฏู</h2>
          </header>
          <div class="grid grid-2 tight-grid">
            <div class="mini-metric">
              <div class="mini-label">ุฅุฌูุงูู ุงูุฑุญูุงุช ุงููุงุด ููุท</div>
              <div class="mini-value"><span id="cash-only-total">0.00</span> ุฑ.ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุฅุฌูุงูู ุงูุฑุญูุงุช ุงูุจุทุงูุฉ ููุท</div>
              <div class="mini-value"><span id="card-only-total">0.00</span> ุฑ.ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุงููุงุด ุงููุณุชูู ูู ุงูุฑุญูุงุช ุงููุฎุชูุทุฉ</div>
              <div class="mini-value"><span id="mixed-cash-total">0.00</span> ุฑ.ุณ</div>
            </div>
            <div class="mini-metric">
              <div class="mini-label">ุงูุฌุฒุก ุงููุฑุณู ูููุญูุธุฉ (ูุฎุชูุท)</div>
              <div class="mini-value"><span id="mixed-card-total">0.00</span> ุฑ.ุณ</div>
            </div>
          </div>
          <p class="hint-text">ูู ุญุงูุฉ ุงูุฏูุน ุงููุฎุชูุทุ ุฃุฏุฎู ูุจูุบ ุงููุงุด ุงููุณุชููุ ูููููู ุฅุฏุฎุงู ุงููููุฉ ุงููุงููุฉ ููุฑุญูุฉ (ุงุฎุชูุงุฑููุง) ูุงุญุชุณุงุจ ุงูุฌุฒุก ุงููุฑุณู ูููุญูุธุฉ.</p>
        </section>
      </section>

      <!-- ุดุงุดุฉ ุงูุฅุนุฏุงุฏุงุช -->
      <section class="screen" data-screen="settings">
        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุงูุดุฑูุท ุงูุฑุณููุฉ ููุญุงูุฒ (ูุฐุง ุงูุฃุณุจูุน)</h2>
          </header>

          <form id="settings-form" class="settings-form">
            <div class="form-group">
              <label for="minHoursInput">ุงูุญุฏ ุงูุฃุฏูู ูุณุงุนุงุช ุงูุนูู</label>
              <input id="minHoursInput" type="number" step="0.25" min="0" inputmode="decimal" />
              <span class="suffix">ุณุงุนุฉ</span>
            </div>

            <div class="form-group">
              <label for="baseRidesInput">ุงูุญุฏ ุงูุฃุฏูู ูุนุฏุฏ ุงูุฑุญูุงุช (ุงูุฃุณุงุณู)</label>
              <input id="baseRidesInput" type="number" step="1" min="0" inputmode="numeric" />
              <span class="suffix">ุฑุญูุฉ</span>
              <p class="form-hint">ุงูุชุตุงุนุฏ: ุจุนุฏ <strong>25</strong> ุณุงุนุฉ ุนููุ ููุถุงู ุชูุฑูุจูุง <strong>1.5</strong> ุฑุญูุฉ ููู ุณุงุนุฉ ุฅุถุงููุฉ.</p>
            </div>

            <div class="form-group">
              <label for="minPeakInput">ุงูุญุฏ ุงูุฃุฏูู ููุณุจุฉ ุฑุญูุงุช ุงูุฐุฑูุฉ</label>
              <input id="minPeakInput" type="number" step="1" min="0" max="100" inputmode="numeric" />
              <span class="suffix">%</span>
            </div>

            <div class="form-group">
              <label for="bonusPerRideInput">ูููุฉ ุงูุญุงูุฒ ููู ุฑุญูุฉ</label>
              <input id="bonusPerRideInput" type="number" step="0.5" min="0" inputmode="decimal" />
              <span class="suffix">ุฑ.ุณ</span>
            </div>

            <div class="divider"></div>

            <div class="form-group">
              <label for="acceptRateInput">ูุณุจุฉ ุงููุจูู ุงูุญุงููุฉ (ูู ุฃูุจุฑ/ุซุฑุงู)</label>
              <input id="acceptRateInput" type="number" step="1" min="0" max="100" inputmode="numeric" />
              <span class="suffix">%</span>
            </div>

            <div class="form-group">
              <label for="cancelRateInput">ูุณุจุฉ ุงูุฅูุบุงุก ุงูุญุงููุฉ (ูู ุฃูุจุฑ/ุซุฑุงู)</label>
              <input id="cancelRateInput" type="number" step="0.5" min="0" max="100" inputmode="decimal" />
              <span class="suffix">%</span>
            </div>

            <p class="form-hint">ููููู ุชุนุฏูู ูุฐู ุงููุณุจ ูู ุฃู ูุญุธุฉุ ูุณุชูุนูุณ ุนูู ุงูุฏุงุดุจูุฑุฏ ููุฑูุง.</p>

            <div class="form-actions">
              <button type="submit" class="primary-btn full-width">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
          </form>
        </section>

        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุฅุฏุงุฑุฉ ุงูุฃุณุจูุน ุงูุญุงูู</h2>
          </header>
          <button id="reset-week-btn" class="danger-outline-btn full-width">
            ุชุตููุฑ ุจูุงูุงุช ูุฐุง ุงูุฃุณุจูุน
          </button>
          <p class="hint-text">ูุฐุง ุงูุฒุฑ ูุญุฐู ูู ุฑุญูุงุช ูุฐุง ุงูุฃุณุจูุน ููุจุฏุฃ ุฃุณุจูุนูุง ุฌุฏูุฏูุง ุจูุงุกู ุนูู ุชุงุฑูุฎ ุงูููู (ุงูุฅุซูููโุงูุฃุญุฏ).</p>
        </section>
      </section>

      <!-- ุดุงุดุฉ ุงูุชูุฑูุฑ -->
      <section class="screen" data-screen="report">
        <section class="card section-card">
          <header class="section-header">
            <h2 class="section-title">ุชูุฑูุฑ ุฃุณุจูุน ุงูุญุงูุฒ</h2>
          </header>

          <div id="report-content" class="report-content">
            <!-- ูููููุฏ ุชููุงุฆููุง -->
          </div>

          <button id="print-report-btn" class="primary-btn full-width">
            ุทุจุงุนุฉ / ุญูุธ ูู PDF
          </button>
        </section>
      </section>
    </main>

    <!-- ุดุฑูุท ุงูุชููู ุงูุณููู -->
    <nav class="bottom-nav">
      <button class="nav-item nav-active" data-target="home">
        <span class="nav-icon">๐</span>
        <span class="nav-label">ุงูุฏุงุดุจูุฑุฏ</span>
      </button>
      <button class="nav-item" data-target="trips">
        <span class="nav-icon">๐งพ</span>
        <span class="nav-label">ุงูุฑุญูุงุช</span>
      </button>
      <button class="nav-item" data-target="wallet">
        <span class="nav-icon">๐ฐ</span>
        <span class="nav-label">ุงููุญูุธุฉ</span>
      </button>
      <button class="nav-item" data-target="settings">
        <span class="nav-icon">โ๏ธ</span>
        <span class="nav-label">ุงูุฅุนุฏุงุฏุงุช</span>
      </button>
      <button class="nav-item" data-target="report">
        <span class="nav-icon">๐</span>
        <span class="nav-label">ุงูุชูุฑูุฑ</span>
      </button>
    </nav>
  </div>

  <!-- ูุงูุฐุฉ ุฅููุงุก ุงูุฑุญูุฉ -->
  <div id="end-trip-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true">
    <div class="modal">
      <header class="modal-header">
        <h2 class="modal-title">ุฅููุงุก ุงูุฑุญูุฉ ูุชุณุฌูู ุจูุงูุงุชูุง</h2>
      </header>
      <div class="modal-body">
        <p class="modal-text">ุฃุฏุฎู ูููุฉ ุงูุฑุญูุฉ ูุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน. ูู ุญุงูุฉ ุงููุฎุชูุทุ ุฃุฏุฎู ูุจูุบ ุงููุงุด ุนูู ุงูุฃูู.</p>

        <label class="field-label" for="fareInput">ูููุฉ ุงูุฑุญูุฉ (ุฅุฌูุงูู)</label>
        <input id="fareInput" type="number" step="0.5" min="0" inputmode="decimal" class="modal-input" placeholder="ูุซุงู: 28.50" />

        <label class="field-label" for="cashPartInput">ุงููุงุด ุงููุณุชูู (ูู ุญุงูุฉ ุงููุฎุชูุท)</label>
        <input id="cashPartInput" type="number" step="0.5" min="0" inputmode="decimal" class="modal-input" placeholder="ุงุชุฑูู ูุงุฑุบูุง ุฅู ูู ููู ูุฎุชูุทูุง" />

        <div class="field-label">ุทุฑููุฉ ุงูุฏูุน</div>
        <div class="payment-type-row">
          <button type="button" class="chip chip-selected" data-pay="cash">ูุงุด ููุท</button>
          <button type="button" class="chip" data-pay="card">ุจุทุงูุฉ ููุท</button>
          <button type="button" class="chip" data-pay="mixed">ูุฎุชูุท (ูุงุด + ุจุทุงูุฉ)</button>
        </div>

        <div class="field-label">ูู ุงูุฑุญูุฉ ุฏุงุฎู ููุช ุงูุฐุฑูุฉุ</div>
        <div class="inline-row">
          <label class="checkbox-label">
            <input type="checkbox" id="overridePeak" />
            <span>ุชุนุฏูู ูุฏูู (ูุชุฌุงูุฒ ุงูุญุณุงุจ ุงูุชููุงุฆู)</span>
          </label>
        </div>
        <div class="payment-type-row small-row">
          <button type="button" class="chip chip-soft" data-peak="auto">ุชููุงุฆู</button>
          <button type="button" class="chip chip-soft" data-peak="force-peak">ุงุนุชุจุงุฑูุง ุฐุฑูุฉ</button>
          <button type="button" class="chip chip-soft" data-peak="force-off">ุฎุงุฑุฌ ุงูุฐุฑูุฉ</button>
        </div>
      </div>
      <footer class="modal-footer">
        <button id="save-trip-btn" class="primary-btn full-width">ุญูุธ ุงูุฑุญูุฉ</button>
        <button id="cancel-trip-btn" class="ghost-btn full-width">ุฅูุบุงุก</button>
      </footer>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ูุนูููุงุช -->
  <div id="info-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true">
    <div class="modal">
      <header class="modal-header">
        <h2 class="modal-title" id="info-modal-title">ุชูุงุตูู</h2>
      </header>
      <div class="modal-body">
        <p id="info-modal-text" class="modal-text"></p>
      </div>
      <footer class="modal-footer">
        <button id="info-close-btn" class="primary-btn full-width">ุญุณูุงู</button>
      </footer>
    </div>
  </div>

  <!-- ูุงูุฐุฉ ุฑุณุงุฆู ุณุฑูุนุฉ -->
  <div id="toast" class="toast hidden"></div>

  <script src="app.js"></script>
</body>
</html>
