# متابع حافز ثرايف (نسخة v4.2)

تطبيق ويب خفيف مخصص للجوال يساعدك على تتبّع تحقيق شروط الحافز الأسبوعي من ثرايف بدقّة وبشكل لحظي، مع واجهة عربية بالكامل وتصميم بصري حديث، وإمكانية التثبيت كتطبيق (PWA) على الجوال.

## المزايا الرئيسية

- **داشبورد رئيسي تفاعلي**:
  - ملخص لقيمة الحافز المتوقعة لهذا الأسبوع (عدد الرحلات × قيمة الحافز لكل رحلة).
  - ساعات العمل التقديرية من مدة الرحلات.
  - إجمالي الدخل من الرحلات ونسبة زيادة الدخل التقريبية عند تحقيق الحافز.
  - حالة الحافز (متحقق / غير متحقق) مع مؤشر بصري متوهّج عند استيفاء جميع الشروط.

- **حساب دقيق لشروط ثرايف**:
  - شرط الحد الأدنى لساعات العمل.
  - شرط الحد الأدنى لعدد الرحلات مع المعادلة التصاعدية:
    - بعد تجاوز 25 ساعة عمل، يتم زيادة عدد الرحلات المطلوبة بمعدل 1.5 رحلة لكل ساعة إضافية.
  - شرط نسبة رحلات أوقات الذروة (70% افتراضيًا وقابلة للتعديل).
  - نسبة القبول ونسبة الإلغاء (تُدخل يدويًا من تطبيق أوبر/ثرايف وقتما تشاء).

- **تسجيل رحلات عملي وسريع**:
  - زر **بدء الرحلة** عند قبول الرحلة في أوبر.
  - زر **إنهاء الرحلة الحالية** يفتح Bottom Sheet أنيق:
    - اختيار نوع الدفع: (كاش، بطاقة، مختلط).
    - إدخال قيمة الرحلة، والكاش المستلم (في حالة الكاش أو المختلط).
    - لوحة أرقام رقمية داخلية مريحة.
    - تمييز تلقائي هل الرحلة داخل أوقات الذروة أم لا، حسب وقت البداية (ميلادي فقط).

- **ملخص محفظة نقدية**:
  - مجموع الكاش المستلم.
  - مجموع الجزء الأونلاين (المحوّل للمحفظة).
  - إجمالي الدخل من الرحلات (كاش + أونلاين).

- **تقرير أسبوعي جاهز للطباعة**:
  - صفحة `report.html` تستقبل البيانات من التطبيق وتعرض:
    - فترة الحافز (من الإثنين إلى الأحد بالميلادي).
    - إجمالي الرحلات، ساعات العمل، الدخل، الحافز المتوقّع، نسبة الذروة، نسبة زيادة الدخل.
    - جدول مفصّل بجميع الرحلات.
  - يمكن طباعتها أو حفظها كـ PDF من المتصفح.

- **إعدادات مرنة لشروط الحافز**:
  - الحد الأدنى لساعات العمل.
  - الحد الأدنى الأساسي لعدد الرحلات.
  - الحد الأدنى لنسبة الذروة.
  - قيمة الحافز لكل رحلة (حاليًا 3 ريال، لكن قابلة للتعديل مستقبلًا).
  - نسبة القبول ونسبة الإلغاء الرسمية.

- **تجربة مستخدم محسّنة**:
  - شريط تنقّل سفلي بأيقونات ثابتة (الرئيسية، الرحلات، المحفظة، الإعدادات، التقرير).
  - مؤثرات بصرية خفيفة وحركات (أنيميشن) للداشبورد والمودال والـ Bottom Sheet.
  - مؤثرات صوتية قصيرة (نجاح / تنبيه / نقر) عبر Web Audio API بدون أي ملفات صوتية خارجية.
  - تصميم مخصص للموبايل (RTL) مع كسرات شاشة صغيرة.

## الملفات

- `index.html`  
  واجهة التطبيق الرئيسية (الداشبورد + الرحلات + المحفظة + الإعدادات + التقرير المختصر + المودال + الـ Bottom Sheet).

- `styles.css`  
  جميع تنسيقات الواجهة (تصميم موبايلي حديث، ألوان داكنة، أنيميشن، شريط تنقل سفلي شفاف، بطاقات، جداول…).

- `app.js`  
  منطق التطبيق بالكامل:
  - إدارة الحالة في `localStorage`.
  - حساب الشروط (الساعات، الرحلات، الذروة، القبول، الإلغاء).
  - منطق أوقات الذروة حسب الأيام والساعات (ميلادي فقط).
  - تسجيل الرحلات، وفتح/إغلاق Bottom Sheet، وحفظ القيم.
  - تحديث الداشبورد والرسوم والمؤشرات.
  - نظام المودال (معلومات + تأكيد) مع مؤثرات صوتية.

- `report.html`  
  صفحة مستقلة لعرض تقرير الأسبوع بالتفصيل، تستخدم البيانات المرسلة من `app.js` عبر `location.hash`، وجاهزة للطباعة أو الحفظ كـ PDF.

- `manifest.webmanifest`  
  ملف تعريف PWA، لتثبيت التطبيق على الجوال باسم (حافز ثرايف) مع الأيقونات:

  - `icon-512.png`  
  - `icon-196.png`  

  **ملاحظة:** ضع ملفي الأيقونات في جذر المشروع بجانب `index.html`.

- `sw.js`  
  Service Worker بسيط لتخزين الملفات أساسيًا في الكاش ودعم العمل دون اتصال (Offline-first بسيط).

## طريقة التشغيل محليًا

1. ضع ملفات المشروع في مجلد واحد (مع أيقونات التطبيق).
2. استخدم أي خادم بسيط (مثل VS Code Live Server أو `npx serve` أو `python -m http.server`).
3. افتح المتصفح على رابط الخادم، مثال:
   - `http://localhost:4173` أو `http://localhost:5000` حسب أداتك.
4. افتح الموقع من الجوال (أو من متصفح الجوال) ومن ثم:
   - اختر **"Add to Home Screen"** لتثبيت التطبيق كتطبيق مستقل.

## النشر على Netlify

1. ارفع المجلد الكامل للمشروع إلى مستودع GitHub (كما فعلت).
2. اربط المستودع مع Netlify أو:
   - ارفع المجلد مضغوطًا (ZIP) إلى Netlify عبر واجهة السحب والإفلات.
3. بعد النشر:
   - افتح الرابط من جوالك.
   - ثبّت التطبيق من المتصفح (PWA).
   - جرّب تسجيل الرحلات والتحقق من الداشبورد والتقرير.

## ملاحظات

- التطبيق يعمل بالكامل في المتصفح بدون أي خادم أو قاعدة بيانات خارجية.
- البيانات تحفظ في `localStorage` لكل جهاز/متصفح على حدة.
- بداية ونهاية أسبوع الحافز يلتقطها التطبيق تلقائيًا (من الإثنين حتى الأحد) عند الضغط على زر **"أسبوع جديد"**.
- التاريخ والوقت المستخدمان في جميع الحسابات ميلاديان فقط، كما طلبت.
